<!DOCTYPE html>
<html>
<head>
    <meta property="og:title" content="ComicCore‚Ñ¢ - Create & Read">
<meta property="og:description" content="ComicCore‚Ñ¢ is a new app that lets you make comics using 2D sprites and arcade characters. No drawing skills needed, just customize the poses, angles, and frames to tell the story you want.">
<meta property="og:image" content="https://media.discordapp.net/attachments/1472088820584419450/1475026485256523816/IMG_1777.png?ex=699bfcf6&is=699aab76&hm=4d03c9164ead0826a54cb0d5225719bbab724d2cf9296a72589bcb41db1f815d&=&format=webp&quality=lossless">
<meta property="og:url" content="https://zaz444.github.io/comiccore/">
<meta name="twitter:card" content="summary_large_image">
    <link rel="stylesheet" href="theme.css">
    <script src="theme.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComicCore - Home</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        /* colors now in theme.css */

        body { 
            margin: 0; 
            padding: 20px; 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg); 
            color: var(--text); 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh;
            position: relative; /* For the bubbles container */
            z-index: 1;
        }
        
        .home-header { 
            width: 100%; 
            max-width: 400px; 
            display: flex; 
            justify-content: space-between; 
            align-items: flex-start; 
            margin: 40px 0 30px 0; 
        }

        .welcome-container { flex: 1; }
        h1 { margin: 0; font-size: 26px; font-weight: 900; letter-spacing: -0.5px; }
        
        .corner-avatar {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            border: 2px solid var(--accent);
            cursor: pointer;
            object-fit: cover;
            background: var(--card);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.3s ease;
        }
        .corner-avatar:hover { 
            transform: scale(1.1) rotate(5deg); 
            box-shadow: 0 6px 16px var(--accent);
        }

        .user-meta-row { display: flex; align-items: center; gap: 8px; margin-top: 5px; }
        #user-display { color: var(--accent); font-size: 18px; font-weight: 700; }
        #id-badge { background: #202327; color: var(--accent); font-size: 11px; padding: 4px 10px; border-radius: 8px; font-weight: 800; border: 1px solid var(--border); box-shadow: inset 0 2px 4px rgba(0,0,0,0.2); }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; width: 100%; max-width: 400px; z-index: 2; }
        
        .card { 
            background: var(--accent); 
            border-radius: 20px; 
            padding: 30px 15px; 
            text-align: center; 
            color: white; 
            font-weight: 700; 
            font-size: 15px; 
            cursor: pointer; 
            border: none; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); 
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        /* Subtle shine effect on cards */
        .card::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 50%; height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0) 100%);
            transform: skewX(-25deg);
            transition: 0.5s;
        }

        .card:hover::after { left: 150%; }
        
        .card:active { transform: scale(0.95) translateY(2px); box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
        .card:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            filter: brightness(1.05); 
        }
        
        .card.large { 
            grid-column: span 2; 
            padding: 22px 25px; 
            text-align: left; 
            justify-content: flex-start;
            font-size: 16px;
        }

        /* Notification States */
        .card.has-message { background: var(--notify-msg) !important; color: #000; animation: pulse 2s infinite; }
        .card.has-request { background: var(--notify-req) !important; color: #000; animation: pulse 2s infinite; }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
        }

        .logout-btn { 
            margin-top: 40px; 
            background: rgba(0,0,0,0.2); 
            border: 1px solid var(--border); 
            color: var(--secondary); 
            padding: 12px 35px; 
            border-radius: 50px; 
            cursor: pointer; 
            font-weight: 700; 
            transition: all 0.3s ease;
            backdrop-filter: blur(4px);
            z-index: 2;
        }
        .logout-btn:hover {
            background: rgba(255,50,50,0.1);
            color: #ff5555;
            border-color: #ff5555;
            transform: translateY(-2px);
        }

        /* ‚îÄ‚îÄ Glowing Bottom Bubbles Animation ‚îÄ‚îÄ */
        .bubbles-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .bubble {
            position: absolute;
            bottom: -30px;
            border-radius: 50%;
            background: var(--accent);
            opacity: 0;
            box-shadow: 0 0 15px var(--accent), 0 0 30px var(--accent);
            animation: floatUp 6s infinite ease-in;
        }

        .bubble.teal {
            background: var(--teal);
            box-shadow: 0 0 15px var(--teal), 0 0 30px var(--teal);
        }

        @keyframes floatUp {
            0% { bottom: -30px; transform: translateX(0) scale(0.8); opacity: 0; }
            20% { opacity: 0.6; }
            80% { opacity: 0.3; }
            100% { bottom: 200px; transform: translateX(-30px) scale(1.5); opacity: 0; }
        }

        /* Individual Bubble Settings */
        .bubble:nth-child(1) { width: 12px; height: 12px; left: 15%; animation-duration: 5s; }
        .bubble:nth-child(2) { width: 20px; height: 20px; left: 35%; animation-duration: 7s; animation-delay: 1.5s; }
        .bubble:nth-child(3) { width: 10px; height: 10px; left: 55%; animation-duration: 4.5s; animation-delay: 0.5s; }
        .bubble:nth-child(4) { width: 16px; height: 16px; left: 75%; animation-duration: 6s; animation-delay: 2.5s; }
        .bubble:nth-child(5) { width: 24px; height: 24px; left: 85%; animation-duration: 8s; animation-delay: 1s; }

        /* ‚îÄ‚îÄ Ratio Picker Modal ‚îÄ‚îÄ */
        #ratio-modal {
            position: fixed; inset: 0; background: rgba(10,10,12,0.85);
            z-index: 9999; display: none; flex-direction: column;
            align-items: center; justify-content: center; gap: 18px;
            backdrop-filter: blur(16px); padding: 20px;
            animation: fadeIn 0.3s ease-out;
        }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        
        #ratio-modal h2 { margin: 0; color: var(--accent); font-size: 22px; font-weight: 900; letter-spacing: 1px; text-align: center; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        #ratio-modal p  { margin: 0; color: #999; font-size: 13px; text-align: center; }
        
        .ratio-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;
            max-width: 400px; width: 100%;
        }
        
        .ratio-btn {
            background: #1a1a1a; border: 1.5px solid #333; color: #fff;
            border-radius: 14px; padding: 12px 6px; cursor: pointer; font-weight: 800;
            font-size: 12px; text-align: center; transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); display: flex;
            flex-direction: column; align-items: center; justify-content: center; gap: 8px;
            min-height: 75px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .ratio-btn:hover { 
            border-color: var(--accent); color: var(--accent); background: #222; 
            transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0,0,0,0.4);
        }
        .ratio-btn:active { transform: scale(0.95); }
        .ratio-preview { background: #444; border: 1.5px solid #666; border-radius: 3px; transition: 0.2s; }
        .ratio-btn:hover .ratio-preview { border-color: var(--accent); background: rgba(255,255,255,0.1); }
        
        .ratio-cancel {
            background: rgba(255,255,255,0.05); border: 1px solid #444; color: #aaa;
            padding: 12px 32px; border-radius: 50px; cursor: pointer;
            font-size: 14px; font-weight: 700; margin-top: 10px;
            transition: 0.2s;
        }
        .ratio-cancel:hover { background: #333; color: #fff; border-color: #666; }

        /* Mode Modal Animation */
        #mode-modal { animation: fadeIn 0.3s ease-out; }
        .mode-btn {
            flex: 1; background: #1a1a1a; border: 2px solid #333; color: #fff;
            border-radius: 20px; padding: 30px 16px; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; gap: 12px;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); font-family: 'Inter', sans-serif;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .mode-btn:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.5); }
        .mode-btn:active { transform: scale(0.96); }
    </style>
</head>
<body>

    <div class="home-header">
        <div class="welcome-container">
            <h1>Welcome,</h1>
            <div class="user-meta-row">
                <span id="user-display">Loading...</span>
                <span id="id-badge" style="display:none;">#ID</span>
            </div>
        </div>
        <img id="nav-pfp" src="https://via.placeholder.com/50" class="corner-avatar" onclick="goToMyProfile()" title="View Public Profile">
    </div>

    <div class="grid">
        <button class="card" onclick="location.href='discover.html'">Discover</button>
        <button class="card" onclick="location.href='my-comics.html'">My Comics</button>
        
        <button class="card" onclick="goToMyProfile()">View Profile</button>
        <button class="card" onclick="location.href='favorites.html'">Favorites</button>
        
        <button class="card large" onclick="openRatioModal()">Create Comic</button>
        <button class="card large" onclick="location.href='settings.html'">Settings</button>
        
        <button id="teams-btn" class="card large" onclick="location.href='squads.html'">Squads</button>
        <button class="card large" onclick="location.href='sprite-editor.html'" style="border-color: var(--teal); color: var(--teal); background: rgba(255,255,255,0.05); border: 2px solid var(--teal);">üé® Sprite Editor</button>
    </div>

    <button class="logout-btn" onclick="logout()">Sign Out</button>

    <div class="bubbles-container">
        <div class="bubble"></div>
        <div class="bubble teal"></div>
        <div class="bubble"></div>
        <div class="bubble teal"></div>
        <div class="bubble"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://mmycqeejhguzhtzkyjaj.supabase.co'; 
        const SUPABASE_KEY = 'sb_publishable_8Du2GAcH5oBeiHWe-1e0Fg_XtSub2QE';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function checkUser() {
            const { data: { user } } = await supabaseClient.auth.getUser();
            
            if (user) {
                let myProfile = JSON.parse(localStorage.getItem('user_profile') || '{}');

                if (!myProfile.handle) {
                    const { data: freshProfile } = await supabaseClient
                        .from('profiles')
                        .select('*')
                        .eq('permanent_id', user.id)
                        .maybeSingle();

                    if (freshProfile) {
                        myProfile = { ...myProfile, ...freshProfile };
                        localStorage.setItem('user_profile', JSON.stringify(myProfile));
                    }
                }

                document.getElementById('user-display').innerText = myProfile.name || "New Creator";
                if (myProfile.pic) document.getElementById('nav-pfp').src = myProfile.pic;

                if (myProfile.permanent_id) {
                    const badge = document.getElementById('id-badge');
                    badge.innerText = "#" + myProfile.permanent_id;
                    badge.style.display = "inline-block";
                }

                if (localStorage.getItem('cc-privacy-team') === 'false')
                    document.getElementById('teams-btn').style.display = 'none';

                checkTeamNotifications(user.id);
            } else {
                window.location.href = "login.html";
            }
        }


        async function checkTeamNotifications(userId) {
            const teamsBtn = document.getElementById('teams-btn');

            const { data: myTickets } = await supabaseClient
                .from('team_tickets')
                .select('id')
                .eq('owner_id', userId);
            
            if (myTickets && myTickets.length > 0) {
                const ticketIds = myTickets.map(t => t.id);
                const { count: incomingCount } = await supabaseClient
                    .from('team_requests')
                    .select('*', { count: 'exact', head: true })
                    .in('ticket_id', ticketIds)
                    .eq('status', 'pending');

                if (incomingCount > 0) {
                    teamsBtn.classList.add('has-request');
                    teamsBtn.innerText = "Squads (Join Request!)";
                    return;
                }
            }

            const { count: acceptedCount } = await supabaseClient
                .from('team_requests')
                .select('*', { count: 'exact', head: true })
                .eq('sender_id', userId)
                .eq('status', 'accepted');

            if (acceptedCount > 0) {
                teamsBtn.classList.add('has-message');
                teamsBtn.innerText = "Squads (Request Accepted!)";
            }
        }

        window.addEventListener('keydown', (e) => {
            if (e.key.toLowerCase() === 'o') {
                if (document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA') {
                    location.href = 'connections.html';
                }
            }
        });

        function goToMyProfile() {
            const myProfile = JSON.parse(localStorage.getItem('user_profile') || '{}');
            location.href = myProfile.handle ? `profile.html?u=${myProfile.handle}` : 'profile.html';
        }

        async function logout() {
            await supabaseClient.auth.signOut();
            window.location.href = "login.html";
        }

        function openRatioModal() {
            document.getElementById('ratio-modal').style.display = 'flex';
        }

        function pickRatio(w, h) {
            localStorage.setItem('cc-new-comic-ratio', JSON.stringify({ w, h }));
            localStorage.removeItem('active_draft_id');
            document.getElementById('ratio-modal').style.display = 'none';
            document.getElementById('mode-modal').style.display = 'flex';
        }

        function goToMode(mode) {
            if (mode === 'comic') {
                window.location.href = 'create.html';
            } else {
                window.location.href = 'story.html';
            }
        }
        checkUser();
    </script>

    <div id="ratio-modal">
        <h2>CHOOSE CANVAS FORMAT</h2>
        <p>Pick the frame shape for your comic. Set by creator ‚Äî can't change later.</p>
        <div class="ratio-grid">
            <button class="ratio-btn" onclick="pickRatio(1,1)">
                <div class="ratio-preview" style="width:36px;height:36px;"></div>1:1
            </button>
            <button class="ratio-btn" onclick="pickRatio(16,9)">
                <div class="ratio-preview" style="width:44px;height:25px;"></div>16:9
            </button>
            <button class="ratio-btn" onclick="pickRatio(9,16)">
                <div class="ratio-preview" style="width:25px;height:44px;"></div>9:16
            </button>
            <button class="ratio-btn" onclick="pickRatio(5,4)">
                <div class="ratio-preview" style="width:38px;height:30px;"></div>5:4
            </button>
            <button class="ratio-btn" onclick="pickRatio(4,5)">
                <div class="ratio-preview" style="width:30px;height:38px;"></div>4:5
            </button>
            <button class="ratio-btn" onclick="pickRatio(7,5)">
                <div class="ratio-preview" style="width:40px;height:29px;"></div>7:5
            </button>
            <button class="ratio-btn" onclick="pickRatio(5,7)">
                <div class="ratio-preview" style="width:29px;height:40px;"></div>5:7
            </button>
            <button class="ratio-btn" onclick="pickRatio(4,3)">
                <div class="ratio-preview" style="width:38px;height:29px;"></div>4:3
            </button>
            <button class="ratio-btn" onclick="pickRatio(3,4)">
                <div class="ratio-preview" style="width:29px;height:38px;"></div>3:4
            </button>
            <button class="ratio-btn" onclick="pickRatio(5,3)">
                <div class="ratio-preview" style="width:40px;height:24px;"></div>5:3
            </button>
            <button class="ratio-btn" onclick="pickRatio(3,5)">
                <div class="ratio-preview" style="width:24px;height:40px;"></div>3:5
            </button>
            <button class="ratio-btn" onclick="pickRatio(3,2)">
                <div class="ratio-preview" style="width:40px;height:27px;"></div>3:2
            </button>
            <button class="ratio-btn" onclick="pickRatio(2,3)" style="grid-column:span 1;">
                <div class="ratio-preview" style="width:27px;height:40px;"></div>2:3
            </button>
        </div>
        <button class="ratio-cancel" onclick="document.getElementById('ratio-modal').style.display='none'">Cancel</button>
    </div>

    <div id="mode-modal" style="
        position:fixed; inset:0; background:rgba(10,10,12,0.85);
        z-index:10000; display:none; flex-direction:column;
        align-items:center; justify-content:center; gap:24px;
        backdrop-filter:blur(16px); padding:30px;
        font-family:'Inter',sans-serif;
    ">
        <div style="text-align:center;">
            <h2 style="margin:0; color:var(--accent); font-size:24px; font-weight:900; letter-spacing:1px; text-shadow: 0 2px 10px rgba(0,0,0,0.5);">WHAT ARE YOU MAKING?</h2>
            <p style="margin:8px 0 0; color:#aaa; font-size:14px;">Choose your creation type</p>
        </div>
        <div style="display:flex; gap:16px; width:100%; max-width:380px;">
            <button class="mode-btn" onclick="goToMode('comic')" onmouseover="this.style.borderColor='var(--accent)'" onmouseout="this.style.borderColor='#333'">
                <span style="font-size:46px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.4));">üé®</span>
                <span style="font-weight:900; font-size:18px; color:var(--accent);">COMIC</span>
                <span style="font-size:12px; color:#888; line-height:1.5; text-align:center;">Frames, sprites, speech bubbles. Visual storytelling.</span>
            </button>
            <button class="mode-btn" onclick="goToMode('story')" onmouseover="this.style.borderColor='var(--teal)'" onmouseout="this.style.borderColor='#333'">
                <span style="font-size:46px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.4));">üìñ</span>
                <span style="font-weight:900; font-size:18px; color:var(--teal);">STORY</span>
                <span style="font-size:12px; color:#888; line-height:1.5; text-align:center;">Write a novel or short story. Text-based, like a book.</span>
            </button>
        </div>
        <button onclick="document.getElementById('mode-modal').style.display='none'; document.getElementById('ratio-modal').style.display='flex';" class="ratio-cancel">‚Üê Back to Ratio</button>
    </div>
</body>
</html>